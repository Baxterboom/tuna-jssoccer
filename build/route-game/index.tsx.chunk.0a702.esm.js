(window.webpackJsonp=window.webpackJsonp||[]).push([[3],{BYag:function(e){e.exports={"action-menu":"action-menu__2Ghxs",actionMenu:"action-menu__2Ghxs",button:"button__1TZj6",items:"items__2TWJF",show:"show__2kEoS"}},DtED:function(e,t,n){"use strict";var i=n("MAaF");e.exports=function(e,t,n){e&&i(function(){e.apply(n||null,t||[])})}},Gkjj:function(e,t,n){(function(t){var n=t.CustomEvent;e.exports=function(){try{var e=new n("cat",{detail:{foo:"bar"}});return"cat"===e.type&&"bar"===e.detail.foo}catch(e){}return!1}()?n:"function"==typeof document.createEvent?function(e,t){var n=document.createEvent("CustomEvent");return t?n.initCustomEvent(e,t.bubbles,t.cancelable,t.detail):n.initCustomEvent(e,!1,!1,void 0),n}:function(e,t){var n=document.createEventObject();return n.type=e,t?(n.bubbles=Boolean(t.bubbles),n.cancelable=Boolean(t.cancelable),n.detail=t.detail):(n.bubbles=!1,n.cancelable=!1,n.detail=void 0),n}}).call(this,n("pCvA"))},"K/8s":function(e){"use strict";function t(e){var t=n[e];return t?t.lastIndex=0:n[e]=t=new RegExp(i+e+r,"g"),t}var n={},i="(?:^|\\s)",r="(?:\\s|$)";e.exports={add:function(e,n){var i=e.className;i.length?t(n).test(i)||(e.className+=" "+n):e.className=n},rm:function(e,n){e.className=e.className.replace(t(n)," ").trim()}}},KXrs:function(e,t,n){"use strict";function i(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},i=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(i=i.concat(Object.getOwnPropertySymbols(n).filter(function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),i.forEach(function(t){r(e,t,n[t])})}return e}function r(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function o(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function a(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}n.r(t);var s=n("4dxh"),c=n("BYag"),l=n("hcwh");class u extends s.Component{constructor(){var e,t,n;super(...arguments),n=void 0,(t="element")in(e=this)?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n}close(){this.setState({show:!1})}toggle(){this.setState({show:!this.state.show})}callback(e,t){t.onClick&&t.onClick(e,t),this.close()}isOverflowing(){return this.element.scrollHeight>this.element.clientHeight||this.element.scrollWidth>this.element.clientWidth}render(e,t){const n=JSLinq(e.options.items).Select(e=>Object(s.h)("li",{onClick:t=>this.callback(t,e)},e.text)),i=[c.items];return t.show&&(i.push(c.show),Object(l.b)(()=>this.element,this.close.bind(this))),Object(s.h)("div",{class:c.actionMenu,ref:e=>this.element=e},Object(s.h)("div",{class:c.button,onClick:this.toggle.bind(this)}),Object(s.h)("ul",{class:i.join(" ")},n))}}var p=n("iFcc"),h=n("t4lu");class d extends s.Component{constructor(){super(...arguments),r(this,"state",{actionMenu:{title:"A title",items:[]}})}componentWillMount(){this.state.actionMenu.items.AddRange([{text:"Add player",onClick:this.addPlayer.bind(this,void 0)},{text:"Add line",onClick:this.addLine.bind(this)},{text:"Remove line",onClick:this.removeLine.bind(this)}])}addPlayer(e){this.props.data.players.Add(e||i({},p.a.Empty,{line:this.props.data})),this.setState(this.state)}removePlayer(e){this.props.data.players.Remove(e),this.setState(this.state)}addLine(){const e=this.props.data.match,t={players:[],match:e};t.players.push(i({},p.a.Empty,{line:t})),e.lines.Insert(t,e.lines.indexOf(this.props.data)+1),e.update()}removeLine(){const e=this.props.data.match;e.lines.Remove(this.props.data),e.update()}render(e,t){let n=0;const i=e.data.players.map(e=>Object(s.h)(p.a,{key:n++,data:e}));return Object(s.h)("div",{class:["line",h.line].join(" ")},Object(s.h)(u,{options:t.actionMenu}),Object(s.h)("div",{class:["players",h.players].join(" ")},i))}}var m=n("W8JN"),f=n("vls+"),v=n("mLX3");class g extends s.Component{constructor(){super(...arguments),o(this,"element",void 0),o(this,"state",{players:[]})}componentWillMount(){const e=v.a.Players().Select(e=>p.a.Map(e)).OrderBy(e=>e.displayname);this.state.players.AddRange(e)}render(e,t){const n=e.match.playerListEventArgs,i=[m.playerList];if(!n.event)return Object(s.h)("ul",{class:i.join(" ")});i.push(m.show),Object(l.b)(()=>this.element,this.close.bind(this));const r=e.match.lines.SelectMany(e=>e.players),o=(n.selected.number||"?")+" # "+(n.selected.displayname||"?"),a=t.players.map(e=>{const t=r.Any(t=>t.id==e.id)?m.selected:"";return Object(s.h)("li",{class:t,onClick:this.onSelectPlayer.bind(this,e)},Object(s.h)("span",null,e.displayname))});return Object(s.h)("ul",{class:i.join(" "),ref:e=>this.element=e},Object(s.h)("li",{class:m.player},Object(s.h)("div",{class:m.playerName},Object(s.h)("input",{type:"text",placeholder:"Enter name",value:o,onChange:this.setText.bind(this)}),Object(s.h)("button",{onClick:this.onRemoveSelectPlayer.bind(this)},"Remove")),Object(s.h)("div",{class:m.playerGoals},Object(s.h)("span",null,"Score: ",n.selected.goals||0),Object(s.h)("button",{onClick:this.score.bind(this,n.selected,-1)},"-"),Object(s.h)("button",{onClick:this.score.bind(this,n.selected,1)},"+"))),Object(s.h)("li",{class:m.playerColor},Object(s.h)(f.b,{options:{onClick:this.setColor.bind(this)}})),a)}score(e,t){t<0&&0==e.goals||(e.goals+=t,this.props.match.update())}close(){this.props.match.playerListEventArgs={},this.props.match.update()}setText(e){const t=e.target.value.split(" # "),n=this.props.match.playerListEventArgs;n.selected.number=t.length<2?"":t.FirstOrDefault(),n.selected.displayname=t.LastOrDefault(),this.props.match.update()}setColor(e){const t=this.props.match.playerListEventArgs;t.selected.color=e,this.props.match.update(),this.close(),console.log(t.selected)}onSelectPlayer(e){const t=this.props.match.playerListEventArgs.selected;if(!t||!t.line)return;const n=e.line=t.line,i=n.players.indexOf(t);n.players[i]=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},i=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(i=i.concat(Object.getOwnPropertySymbols(n).filter(function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),i.forEach(function(t){o(e,t,n[t])})}return e}({},e),this.close()}onRemoveSelectPlayer(){const e=this.props.match.playerListEventArgs.selected;e&&e.line&&(e.line.players.Remove(e),this.close())}}var b=n("sxGq"),y=n("uDKj"),O=n("kOkB"),j=n.n(O),_=n("Y3FI"),w=n("M1bE");n.d(t,"default",function(){return C});class C extends s.Component{constructor(){super(...arguments),a(this,"drake",void 0),a(this,"state",{match:new b.a(this.update.bind(this))})}update(){this.setState(this.state,()=>{Object(_.route)("/game/"+this.state.match.toString())})}componentWillMount(){const e=this.state.match;e.lines=e.lineup(this.props.lineup,e)}componentDidUpdate(){this.drake&&this.drake.destroy();const e=[].slice.call(document.querySelectorAll(".players"));this.drake=j()(e,{copySortSource:!0}),this.drake.on("drop",(e,t,n,i)=>{const r=$(e).prop("_component").props.data,o=$(t).closest(".line").prop("_component").props.data;$(n).closest(".line").prop("_component").props.data.players.Remove(r),o.players.Insert(r,$(i).index()-1||0),r.line=o})}componentWillUnmount(){this.drake&&this.drake.destroy()}render(e,t){const n=t.match.lines.map((e,t)=>Object(s.h)(d,{key:t,data:e}));return Object(s.h)("div",{class:[y.main].join(" ")},Object(s.h)("div",{id:"print-sheet",class:y.printSheet},this.state.match.print()),Object(s.h)("div",{class:[y.pitch].join(" ")},n),Object(s.h)(g,{match:t.match}),Object(s.h)(w.a,{match:t.match}),Object(s.h)("img",{class:y.btnReload,src:"assets/img/refresh_48px.svg",onClick:this.randomizeLineUp.bind(this),title:"New line up"}),Object(s.h)("img",{class:y.btnPrint,src:"assets/img/print.svg",onClick:this.print.bind(this),title:"Print"}))}print(){const e=$("#print-sheet").toggle();e.is(":hidden")||Object(l.b)(()=>e.get(0),()=>e.hide())}randomizeLineUp(){this.state.match.lines.Clear();const e=v.a.Players();Object(l.c)(this.props.lineup).split(";").ForEach(t=>{let n=t.split("|").Select(e=>e[1]).Count();n>e.length&&(n=e.length);const i={match:this.state.match,players:new Array(n)};i.players.ForEach((t,n)=>{const r=Math.floor(Math.random()*e.length),o=e[r];e.Remove(o),i.players[n]=p.a.Map(o,{line:i,goals:0,color:0})}),this.state.match.lines.Add(i)}),this.update()}}},MAaF:function(e){var t="function"==typeof setImmediate;e.exports=t?function(e){setImmediate(e)}:function(e){setTimeout(e,0)}},R5Bz:function(e,t,n){"use strict";(function(t){function i(e,t,n){var i=function(e,t,n){var i,r;for(i=0;i<l.length;i++)if((r=l[i]).element===e&&r.type===t&&r.fn===n)return i}(e,t,n);if(i){var r=l[i].wrapper;return l.splice(i,1),r}}var r=n("Gkjj"),o=n("rXEU"),a=t.document,s=function(e,t,n,i){return e.addEventListener(t,n,i)},c=function(e,t,n,i){return e.removeEventListener(t,n,i)},l=[];t.addEventListener||(s=function(e,n,r){return e.attachEvent("on"+n,function(e,n,r){var o=i(e,n,r)||function(e,n,i){return function(n){var r=n||t.event;r.target=r.target||r.srcElement,r.preventDefault=r.preventDefault||function(){r.returnValue=!1},r.stopPropagation=r.stopPropagation||function(){r.cancelBubble=!0},r.which=r.which||r.keyCode,i.call(e,r)}}(e,0,r);return l.push({wrapper:o,element:e,type:n,fn:r}),o}(e,n,r))},c=function(e,t,n){var r=i(e,t,n);if(r)return e.detachEvent("on"+t,r)}),e.exports={add:s,remove:c,fabricate:function(e,t,n){var i=-1===o.indexOf(t)?new r(t,{detail:n}):function(){var e;return a.createEvent?(e=a.createEvent("Event")).initEvent(t,!0,!0):a.createEventObject&&(e=a.createEventObject()),e}();e.dispatchEvent?e.dispatchEvent(i):e.fireEvent("on"+t,i)}}}).call(this,n("pCvA"))},ReCf:function(e,t,n){"use strict";var i=n("ngLP"),r=n("DtED");e.exports=function(e,t){var n=t||{},o={};return void 0===e&&(e={}),e.on=function(t,n){return o[t]?o[t].push(n):o[t]=[n],e},e.once=function(t,n){return n._once=!0,e.on(t,n),e},e.off=function(t,n){var i=arguments.length;if(1===i)delete o[t];else if(0===i)o={};else{var r=o[t];if(!r)return e;r.splice(r.indexOf(n),1)}return e},e.emit=function(){var t=i(arguments);return e.emitterSnapshot(t.shift()).apply(this,t)},e.emitterSnapshot=function(t){var a=(o[t]||[]).slice(0);return function(){var o=i(arguments),s=this||e;if("error"===t&&!1!==n.throws&&!a.length)throw 1===o.length?o[0]:o;return a.forEach(function(i){n.async?r(i,o,s):i.apply(s,o),i._once&&e.off(t,i)}),e}},e}},W8JN:function(e){e.exports={"player-list":"player-list__3kl8s",playerList:"player-list__3kl8s",show:"show__DCTXs",selected:"selected__2jo3u",player:"player__11oQY","player-name":"player-name__26y3K",playerName:"player-name__26y3K","player-color":"player-color__2O73a",playerColor:"player-color__2O73a","player-goals":"player-goals__3bPhI",playerGoals:"player-goals__3bPhI"}},kOkB:function(e,t,n){"use strict";(function(t){function i(e,n,i,r){t.navigator.pointerEnabled?v[n](e,{mouseup:"pointerup",mousedown:"pointerdown",mousemove:"pointermove"}[i],r):t.navigator.msPointerEnabled?v[n](e,{mouseup:"MSPointerUp",mousedown:"MSPointerDown",mousemove:"MSPointerMove"}[i],r):(v[n](e,{mouseup:"touchend",mousedown:"touchstart",mousemove:"touchmove"}[i],r),v[n](e,i,r))}function r(e){if(void 0!==e.touches)return e.touches.length;if(void 0!==e.which&&0!==e.which)return e.which;if(void 0!==e.buttons)return e.buttons;var t=e.button;return void 0!==t?1&t?1:2&t?3:4&t?2:0:void 0}function o(e,n){return void 0!==t[n]?t[n]:y.clientHeight?y[e]:b.body[e]}function a(e,t,n){var i,r=e||{},o=r.className;return r.className+=" gu-hide",i=b.elementFromPoint(t,n),r.className=o,i}function s(){return!1}function c(){return!0}function l(e){return e.width||e.right-e.left}function u(e){return e.height||e.bottom-e.top}function p(e){return e.parentNode===b?null:e.parentNode}function h(e){return"INPUT"===e.tagName||"TEXTAREA"===e.tagName||"SELECT"===e.tagName||function e(t){if(!t)return!1;if("false"===t.contentEditable)return!1;if("true"===t.contentEditable)return!0;return e(p(t))}(e)}function d(e){return e.nextElementSibling||function(){var t=e;do{t=t.nextSibling}while(t&&1!==t.nodeType);return t}()}function m(e,t){var n=function(e){return e.targetTouches&&e.targetTouches.length?e.targetTouches[0]:e.changedTouches&&e.changedTouches.length?e.changedTouches[0]:e}(t),i={pageX:"clientX",pageY:"clientY"};return e in i&&!(e in n)&&i[e]in n&&(e=i[e]),n[e]}var f=n("ReCf"),v=n("R5Bz"),g=n("K/8s"),b=document,y=b.documentElement;e.exports=function(e,t){function n(e){return-1!==ee.containers.indexOf(e)||V.isContainer(e)}function O(e){var t=e?"remove":"add";i(y,t,"mousedown",C),i(y,t,"mouseup",A)}function j(e){i(y,e?"remove":"add","mousemove",S)}function _(e){var t=e?"remove":"add";v[t](y,"selectstart",w),v[t](y,"click",w)}function w(e){q&&e.preventDefault()}function C(e){if(W=e.clientX,G=e.clientY,1===r(e)&&!e.metaKey&&!e.ctrlKey){var t=e.target,n=E(t);n&&(q=n,j(),"mousedown"===e.type&&(h(t)?t.focus():e.preventDefault()))}}function S(e){if(q)if(0!==r(e)){if(void 0===e.clientX||e.clientX!==W||void 0===e.clientY||e.clientY!==G){if(V.ignoreInputTextSelection){var t=m("clientX",e),n=m("clientY",e);if(h(b.elementFromPoint(t,n)))return}var a=q;j(!0),_(),k(),x(a);var s,c={left:(s=U.getBoundingClientRect()).left+o("scrollLeft","pageXOffset"),top:s.top+o("scrollTop","pageYOffset")};J=m("pageX",e)-c.left,K=m("pageY",e)-c.top,g.add(H||U,"gu-transit"),function(){if(!F){var e=U.getBoundingClientRect();(F=U.cloneNode(!0)).style.width=l(e)+"px",F.style.height=u(e)+"px",g.rm(F,"gu-transit"),g.add(F,"gu-mirror"),V.mirrorContainer.appendChild(F),i(y,"add","mousemove",B),g.add(V.mirrorContainer,"gu-unselectable"),ee.emit("cloned",F,U,"mirror")}}(),B(e)}}else A({})}function E(e){if(!(ee.dragging&&F||n(e))){for(var t=e;p(e)&&!1===n(p(e));){if(V.invalid(e,t))return;if(!(e=p(e)))return}var i=p(e);if(i&&!V.invalid(e,t)&&V.moves(e,i,t,d(e)))return{item:e,source:i}}}function x(e){var t,n;t=e.item,n=e.source,("boolean"==typeof V.copy?V.copy:V.copy(t,n))&&(H=e.item.cloneNode(!0),ee.emit("cloned",H,e.item,"copy")),I=e.source,U=e.item,$=z=d(e.item),ee.dragging=!0,ee.emit("drag",U,I)}function k(){if(ee.dragging){var e=H||U;L(e,p(e))}}function P(){q=!1,j(!0),_(!0)}function A(e){if(P(),ee.dragging){var t=H||U,n=m("clientX",e),i=m("clientY",e),r=D(a(F,n,i),n,i);r&&(H&&V.copySortSource||!H||r!==I)?L(t,r):V.removeOnSpill?R():N()}}function L(e,t){var n=p(e);H&&V.copySortSource&&t===I&&n.removeChild(U),M(t)?ee.emit("cancel",e,I,I):ee.emit("drop",e,t,I,z),T()}function R(){if(ee.dragging){var e=H||U,t=p(e);t&&t.removeChild(e),ee.emit(H?"cancel":"remove",e,t,I),T()}}function N(e){if(ee.dragging){var t=arguments.length>0?e:V.revertOnSpill,n=H||U,i=p(n),r=M(i);!1===r&&t&&(H?i&&i.removeChild(H):I.insertBefore(n,$)),r||t?ee.emit("cancel",n,I,I):ee.emit("drop",n,i,I,z),T()}}function T(){var e=H||U;P(),F&&(g.rm(V.mirrorContainer,"gu-unselectable"),i(y,"remove","mousemove",B),p(F).removeChild(F),F=null),e&&g.rm(e,"gu-transit"),Z&&clearTimeout(Z),ee.dragging=!1,Q&&ee.emit("out",e,Q,I),ee.emit("dragend",e),I=U=H=$=z=Z=Q=null}function M(e,t){var n;return n=void 0!==t?t:F?z:d(H||U),e===I&&n===$}function D(e,t,i){function r(){if(!1===n(o))return!1;var r=X(o,e),a=Y(o,r,t,i);return!!M(o,a)||V.accepts(U,o,I,a)}for(var o=e;o&&!r();)o=p(o);return o}function B(e){function t(e){ee.emit(e,o,Q,I)}if(F){e.preventDefault();var n=m("clientX",e),i=m("clientY",e),r=i-K;F.style.left=n-J+"px",F.style.top=r+"px";var o=H||U,s=a(F,n,i),c=D(s,n,i),l=null!==c&&c!==Q;(l||null===c)&&(Q&&t("out"),Q=c,l&&t("over"));var u=p(o);if(c!==I||!H||V.copySortSource){var h,f=X(c,s);if(null!==f)h=Y(c,f,n,i);else{if(!0!==V.revertOnSpill||H)return void(H&&u&&u.removeChild(o));h=$,c=I}(null===h&&l||h!==o&&h!==d(o))&&(z=h,c.insertBefore(o,h),ee.emit("shadow",o,c,I))}else u&&u.removeChild(o)}}function X(e,t){for(var n=t;n!==e&&p(n)!==e;)n=p(n);return n===y?null:n}function Y(e,t,n,i){function r(e){return e?d(t):t}var o,a="horizontal"===V.direction;return t!==e?(o=t.getBoundingClientRect(),r(a?n>o.left+l(o)/2:i>o.top+u(o)/2)):function(){var t,r,o,s=e.children.length;for(t=0;t<s;t++){if(o=(r=e.children[t]).getBoundingClientRect(),a&&o.left+o.width/2>n)return r;if(!a&&o.top+o.height/2>i)return r}return null}()}var F,I,U,J,K,W,G,$,z,H,Z;1===arguments.length&&!1===Array.isArray(e)&&(t=e,e=[]);var q,Q=null,V=t||{};void 0===V.moves&&(V.moves=c),void 0===V.accepts&&(V.accepts=c),void 0===V.invalid&&(V.invalid=function(){return!1}),void 0===V.containers&&(V.containers=e||[]),void 0===V.isContainer&&(V.isContainer=s),void 0===V.copy&&(V.copy=!1),void 0===V.copySortSource&&(V.copySortSource=!1),void 0===V.revertOnSpill&&(V.revertOnSpill=!1),void 0===V.removeOnSpill&&(V.removeOnSpill=!1),void 0===V.direction&&(V.direction="vertical"),void 0===V.ignoreInputTextSelection&&(V.ignoreInputTextSelection=!0),void 0===V.mirrorContainer&&(V.mirrorContainer=b.body);var ee=f({containers:V.containers,start:function(e){var t=E(e);t&&x(t)},end:k,cancel:N,remove:R,destroy:function(){O(!0),A({})},canMove:function(e){return!!E(e)},dragging:!1});return!0===V.removeOnSpill&&ee.on("over",function(e){g.rm(e,"gu-hide")}).on("out",function(e){ee.dragging&&g.add(e,"gu-hide")}),O(),ee}}).call(this,n("pCvA"))},ngLP:function(e){e.exports=function(e,t){return Array.prototype.slice.call(e,t)}},pCvA:function(e){var t;t=function(){return this}();try{t=t||new Function("return this")()}catch(e){"object"==typeof window&&(t=window)}e.exports=t},rXEU:function(e,t,n){"use strict";(function(t){var n=[],i="",r=/^on/;for(i in t)r.test(i)&&n.push(i.slice(2));e.exports=n}).call(this,n("pCvA"))},t4lu:function(e){e.exports={line:"line__ChHp0",players:"players__sUl2_",actions:"actions__3lP_E"}},uDKj:function(e){e.exports={main:"main__1gZmu",pitch:"pitch__2rJNf","btn-reload":"btn-reload__2ZU1F",btnReload:"btn-reload__2ZU1F","btn-print":"btn-print__2gJS_",btnPrint:"btn-print__2gJS_","print-sheet":"print-sheet__3mEA6",printSheet:"print-sheet__3mEA6"}}}]);
//# sourceMappingURL=index.tsx.chunk.0a702.esm.js.map